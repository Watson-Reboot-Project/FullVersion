<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>Watson</title>

		<!-- Google fonts -->
	    <link href='http://fonts.googleapis.com/css?family=Exo+2' rel='stylesheet' type='text/css'>
	    <!-- CSS files -->
	    <link href = "css/bootstrap.css" rel = "stylesheet">
	    <link href = "css/styles.css" rel = "stylesheet">
	    <link href = "css/generalmedia.css" rel = "stylesheet">
		<link href = "css/colmn_test.css" rel = "stylesheet">
	    <!-- Java Script files -->
	    <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
	    <script type="text/javascript" src="js/bootstrap.min.js"></script>
	    
		<meta name="description" content="">
		<meta name="author" content="Burt">

		<meta name="viewport" content="width=device-width; initial-scale=1.0">

	</head>

	<body>
		<div id="wrapper" class="page-wrapper">
			<a id="tippytop"></a>
			<!-- Header division -->

			<div id="includedContent"></div>
    <script type="text/javascript" src="js/nav.js"></script>

			<!--Floating nav -->
			<!-- Previous -->
			<style>
			div.floating-previous
			{position:fixed;z-index:200;left:1px; right: auto; width:20px;top:45%;}
			div.floating-previous a, div.floating-menu h3 {display:block;margin:0 0.5em;}
			</style>
			<div class="floating-previous">
				<a href="#" onclick="prevArrowPage(pageObj)">
				<img style="border:0;" src="Images/left-arrow-blue.png" alt="Previous page" width="40">
				</a>
			</div>

			<!-- Next -->
			<style>
			div.floating-next
			{position:fixed;z-index:200; left: auto; right:1px; top:45%;}
			div.floating-next a, div.floating-menu h3 {display:block;margin:0 0.5em;}
			</style>
			<div class="floating-next">
				<a href="#" onclick="nextArrowPage(pageObj)">
				<img style="border:0;" src="Images/right-arrow-blue.png" alt="Next page" width="40">
				</a>
			</div>
			<!-- End floating nav -->
			<!-- End nav -->

			<!-- Main content -->
			
			<p class="Section">
				3.5.2.4 Queries involving both “select” and “project”
			</p>

			<p>
				At the beginning of this section a number of questions were posed, typical of those that might occur in a university environment. These questions included:
			</p>

			<ul>
				<li>
					<p>
						Who is currently majoring in computer science?
					</p>
				</li>

				<li>
					<p>
						Who taught CS 100 in the fall of 2012?
					</p>
				</li>

				<li>
					<p>
						Where is Dr. O’Neal’s office located?
					</p>
				</li>
			</ul>

			<p>
				It was then claimed that a database system should make it possible to easily answer these questions.
			</p>

			<p>
				So far we have discussed two of the three relation database query operators: “select” and “project”. These two operators can be used together to construct tables that answer very specific questions about the data stored in a relation.
			</p>

			<p>
				For example, to answer the question “Who is currently majoring in computer science?”, we can construct a relation that contains the names of all CS majors. All that is required is the following sequence of two relational queries:
			</p>

			<p class="Subfigure">
				CS_Majors &#8592; Select from Students where Major = “CS”
			</p>

			<p class="Subfigure">
				Names_of_CS_Majors &#8592; Project Sname from CS_Majors
			</p>

			<p>
				The first command creates a table, named CS_Majors, that is based on the “Students” relation but only contains those tuples that contain information about CS majors. The second statement projects the name attribute from the “CS_Majors” relation, producing a table that contains only the names of CS majors.
			</p>

			<p>
				It is interesting to note that during the discussion of the programmer’s view of data in Section 3.4, we constructed a program that essentially answered the same question. That program, presented in Figure 3.11, is ten lines long and requires knowledge of file systems and programming concepts in order to be developed.</span><span class="Footnote_20_Symbol"><span class="Footnote" title="Footnote: Actually, Figure 3.11 does not contain a “complete” program, only the main parts of one. The entire program would be substantially longer."><a href="#ftn5" id="body_ftn5">[5]</a></span></span>
			</p>

			<p>
				The other questions listed above can be answer by constructing a series of relational commands that use both “select” and “project”. For example, “Who taught CS 100 in the Fall of 2012?” can be answered with the following sequence of commands:
			</p>

			<p class="Subfigure">
				CS100 &#8592; Select from Courses where Course = “CS100”
			</p>

			<p class="Subfigure">
				CS100_2012 &#8592; Select from CS100 where Year = 2012
			</p>

			<p class="Subfigure">
				CS100_Fall_2012 &#8592; Select from CS100_2012 where Quarter = “Fall”
			</p>

			<p class="Subfigure">
				CS100_Fall_2012_Instructors &#8592; Project Fname from CS100_Fall_2012
			</p>

			<p>
				The first “select” gets information on CS 100 courses. The second “select” narrows this down to CS 100 courses taught in 2012. The third “select” narrows the data even further to the sections of CS 100 taught during the fall quarter of 2012. The final statement projects only the faculty members’ names, so that the resulting relation answers the original question: “Who taught CS 100 in the Fall of 2012?”. For our example university database, the final relation consists of a single entry “ONeal M.B.” Given different data, the final table might have contained multiple entries, since it is possible that a number of different instructors could have taught separate sections of CS 100 in the fall of 2012.
			</p>

			<p>
				While the above example is easy to understand, writing separate “select” statements for every attribute condition we need to express can become cumbersome. Many database programs allow you to “and” together a number of different condition tests, where all of the tests must yield true for a tuple to be selected. The first three statements of the above example can be reduced to a single expression by using such a “compound select”. Hence, the question of who taught CS 100 in the Fall of 2012 could be determined by the following two relational expressions.
			</p>

			<p class="Subfigure">
				CS100_Fall_2012 &#8592; Select from Courses where Course = “CS100”  and
				<br />
				Year = 2012 and
				<br />
				Quarter = “Fall”
				<br />
				CS100_Fall_2012_Instructors &#8592; Project Fname from CS100_Fall_2012
			</p>

			<p>
				You may have noticed that all of the examples in this subsection applied the “select” operator before the “project”. A common error made by students who are just learning to write queries that involve multiple relational expressions, is to perform the “project” too early, or to leave out necessary attributes when crafting a needed projection.
			</p>

			<p>
				For example, let’s say that in trying to determine the names of CS 100 Fall 2012 instructors, I began by first making a list of instructor names and then tried to narrow the list to those instructors who taught CS 100 in the Fall of 2012. In other words, I took the following approach:
			</p>

			<p class="Subfigure">
				Instructors &#8592; Project Fname from Courses
			</p>

			<p class="Subfigure">
				CS100_Fall_2012_Instructors &#8592; Select from Instructors where ???????
			</p>

			<p>
				The problem that I would encounter is that the table with the instructor names does not contain the proper fields to allow me to narrow the list any further – it is just a list of names and nothing more. However, you should not conclude that placing “projects” before “selects” is necessarily wrong. The following sequence of relational expressions, which does begin with a “project” statement, is an acceptable, albeit somewhat longer, solution to the problem.
			</p>

			<p class="Subfigure">
				Course_Data &#8592; Project Fname, Course, Quarter, Year from Courses
			</p>

			<p class="Subfigure">
				CS100_Fall_2012 &#8592; Select from Course_Data where Course = “CS100” and Year = 2012 and Quarter = “Fall”
			</p>

			<p class="Subfigure">
				CS100_Fall_2012_Instructors &#8592; Project Fname from CS100_Fall_2012
			</p>

			<p>
				This solution concentrates first on determining the attributes needed to solve the problem, rather than the tuples needed to do so. Such an approach makes a lot of sense when dealing with tables that contain large numbers of attributes, since it helps us to focus on which parts of a relation are relevant to the question being answered.
			</p>

			<p class="Section">
				Exercises for Section 3.5.2.4
			</p>

			<p>
				Using the relations presented in Figures 3.14, 3.15, and 3.18, develop</span> <span class="Ital">relational queries</span> to solve each of the following problems.
			</p>

			<ol>
				<li>
					<p>
						Where is Dr. O’Neal’s office located?
					</p>
				</li>

				<li>
					<p>
						What course did Dr. Kurtz teach in fall 2013?
					</p>
				</li>

				<li>
					<p>
						What are the names of all male math majors who are between the ages of 19 and 21, inclusive?
					</p>
				</li>

				<li>
					<p>
						What are the names and telephone numbers of faculty in the math department?
					</p>
				</li>

				<li>
					<p>
						List the student numbers (but no other information) of female CS students.
					</p>
				</li>

				<li>
					<p>
						List the salaries of computer science faculty members (but, to protect confidentiality, don’t include any other information in the table).
					</p>
				</li>
			</ol>
			
			<!-- Footnotes -->
			<hr/>
			<p class="Section">
				Footnotes
			</p>
			
			<p class="Footnote">
				<a href="#body_ftn5" id="ftn5">[5]</a> Actually, Figure 3.11 does not contain a “complete” program, only the main parts of one. The entire program would be substantially longer.
			</p>
			
			<p class="Emphasized">
				<a href="#tippytop">Return to top</a>
			</p>
			<nav>
				<p>
					--
				</p>
				<p>
					<a href="index.html">Home</a>
				</p>
				<p>
					<a href="mailto:someone@example.com?Subject=Hello%20again" target="_top"> Contact</a>
				</p>
			</nav>

			<div>

			</div>
			<script>
				var pageObj;
				
				$(document).ready(function() {
					loadLocalTableOfContents("information");
					var spans = document.getElementsByClassName("figNum");		// get the span elements on this page with the class 'figNum'
					populateFigureDictionary("information", spans);
					// once the document has loaded, set figure numbers and arrow paths
					pageObj = getArrowPathsByPage("informationUser2b4");

				});	
			</script>

		</div>
	</body>
</html>
